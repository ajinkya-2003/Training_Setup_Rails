-# frozen_string_literal: true

.container-fluid
  - if user_signed_in?
    .row
      / Sidebar toggle button (always visible)
      .bg-light.p-2
        %button.btn.btn-primary.mb-3{ type: "button", data: { bs_toggle: "collapse", bs_target: "#sidebar" }, aria_controls: "sidebar", aria_expanded: "false", aria_label: "Toggle menu" }
          ‚ò∞ 

      / Sidebar menu (collapsed by default)
      .col-md-3.bg-light.collapse#sidebar
        %h4.text-primary.text-center.mb-4 

        %ul.nav.flex-column
          %li.nav-item.dropdown
            %a.nav-link.dropdown-toggle.fw-bold.text-dark{ href: "#", id: "profileDropdown", role: "button", data: { bs_toggle: "dropdown" }, aria: { expanded: "false" } }
              üë§ My Profile
            %ul.dropdown-menu.show.mt-1{ aria: { labelledby: "profileDropdown" }, style: "position: static; float: none;" }
              %li= link_to "Update Avatar", "#", class: "dropdown-item"
              %li= link_to "Update Personal Data", "#", class: "dropdown-item"

          %li.nav-item.dropdown.mt-3
            %a.nav-link.dropdown-toggle.fw-bold.text-dark{ href: "#", id: "restaurantDropdown", role: "button", data: { bs_toggle: "dropdown" }, aria: { expanded: "false" } }
              üçΩÔ∏è Restaurants
            %ul.dropdown-menu.show.mt-1{ aria: { labelledby: "restaurantDropdown" }, style: "position: static; float: none;" }
              %li= link_to "Restaurants", "#", class: "dropdown-item"
              %li= link_to "Create Restaurant", "#", class: "dropdown-item"

          %li.nav-item.mt-4
            = link_to "üö™ Sign out", destroy_user_session_path, method: :delete, data: { turbo_method: :delete }, class: "btn btn-outline-danger w-100"

      / Main content
      .col-md-9.text-center.mt-5
        %h1.display-4 Welcome to My Rails App!
        %p.lead This is your homepage.
        %p.text-success.mt-4
          You are signed in as
          %strong= current_user.email

  - else
    .text-center.mt-5
      %h1.display-4 Welcome to My Rails App!
      %p.lead This is your homepage.
      .mt-4.d-flex.justify-content-center.gap-2
        = link_to "Register", new_user_registration_path, class: "btn btn-primary btn-lg"
        = link_to "Login", new_user_session_path, class: "btn btn-secondary btn-lg"
