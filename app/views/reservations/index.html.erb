<h2>Reservations for <%= @restaurant.name %></h2>

<table class="table table-striped table-bordered mt-3">
  <thead class="thead-dark">
    <tr>
      <th>Date</th>
      <th>Time</th>
      <th>Guests</th>
      <th>Customer Name</th>
      <th>Contact</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @reservations.each do |r| %>
      <tr>
        <td><%= r.reservation_date %></td>
        <td><%= r.reservation_time.strftime('%I:%M %p') %></td>
        <td><%= r.number_of_guests %></td>
        <td><%= r.customer_name %></td>
        <td><%= r.customer_contact %></td>
        <td>
          <% status_class = case r.status
            when 'pending' then 'badge bg-warning text-dark'
            when 'reserved' then 'badge bg-success'
            when 'rejected' then 'badge bg-danger'
            else 'badge bg-secondary'
          end %>
          <span class="<%= status_class %>"><%= r.status.capitalize %></span>
        </td>
        <td>
          <% if r.status == 'pending' %>
            <%= button_to 'Approve', approve_restaurant_reservation_path(@restaurant, r), method: :patch, class: 'btn btn-sm btn-success mb-1' %>
            <%= button_to 'Reject', reject_restaurant_reservation_path(@restaurant, r), method: :patch, class: 'btn btn-sm btn-danger', data: { confirm: 'Are you sure you want to reject this reservation?' } %>
          <% else %>
            <span class="text-muted">No actions</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
